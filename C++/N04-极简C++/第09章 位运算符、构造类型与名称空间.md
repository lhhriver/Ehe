# 第1章  C++概述

# 第2章 处理数据

# 第3章 分支结构

# 第4章 循环结构

# 第5章 数组

# 第6章 指针

# 第7章 函数初识

# 第8章 函数进阶

# 第9章 位运算符、构造类型与名称空间

## 位运算符

### 位运算

#### **【例9-1】位运算符**

```c++
//文件:ex9_1.cpp
#include <iostream>
using namespace std;

int main()
{
    cout << "7&9 = " << (7 & 9) << endl;
    cout << "7|9 = " << (7 | 9) << endl;
    cout << "7^9 = " << (7 ^ 9) << endl;
    cout << "~7 = " << (~7) << endl;
    return 0;
}

```

输出：

```
7&9 = 1
7|9 = 15
7^9 = 14
~7 = -8
```



#### **【例9-2】左移位与右移位运算符**

```c++
//文件:ex9_2.cpp
#include <iostream>
using namespace std;
int main()
{
    cout << "7<<2 = " << (7 << 2) << endl;
    cout << "7>>2 = " << (7 >> 2) << endl;
    return 0;
}

```

输出：

```
7<<2 = 28
7>>2 = 1
```



### 位运算符应用举例

#### **【例9-3】将一个整数的指定位设置为1或0**

```c++
//文件:ex9_3.cpp
#include <iostream>
using namespace std;
int main()
{
    int a, b;
    cout << "请输入两个整数，空格分隔：";
    cin >> a >> b;
    
    a = a & (~0xf); //~0xf后四位是0，其他位都是1，将a的后四位置为0
    b = b | 0xf;    // 0xf后四位是1，其他位都是0，将a的后四位置为1
    cout << a << endl;
    cout << b << endl;
    return 0;
}
// 20   0001 0100       a = 16       b=31
```

输出：

```
请输入两个整数，空格分隔：86 2
80
15
```

## 结构类型

### 结构类型与结构变量的定义

#### **【例9-4】结构变量的定义和使用**

```c++
//文件:ex9_4.cpp
#include <iostream>
using namespace std;

struct student
{
    int no;      //学号
    char gender; //性别
    int age;     //年龄
    float score; //成绩
};

int main()
{
    student s1;
    s1.no = 9901001;
    s1.gender = 'm';
    s1.age = 20;
    s1.score = 90;
    
    cout << "学号：" << s1.no << endl;
    cout << "性别：" << s1.gender << endl;
    cout << "年龄：" << s1.age << endl;
    cout << "成绩：" << s1.score << endl;
    
    cout << "占用内存字节数：" << sizeof(student) << endl;
    cout << "占用内存字节数：" << sizeof(s1) << endl;
    cout << &s1.no << endl;
    cout << (void *)&s1.gender << endl;
    cout << &s1.age << endl;
    cout << &s1.score << endl;
    return 0;
}

```

输出：

```
学号：9901001
性别：m
年龄：20
成绩：90
占用内存字节数：16
占用内存字节数：16
0x61fe10
0x61fe14
0x61fe18
0x61fe1c
```

###  结构类型的嵌套与结构变量的初始化

#### **【例9-5】结构变量的初始化**

```c++
//文件:ex9_5.cpp
#include <iostream>
using namespace std;

struct date
{
    int year;
    int month;
    int day;
};

struct student
{
    int no;        //学号
    char gender;   //性别
    date birthday; //出生日期
    float score;   //成绩
};

int main()
{
    student s = {9901001, 'm', {2013, 10, 24}, 95}; //初始化
                                                    //	student s={9901001,'m', 2013,10,24,95};	//初始化
    cout << "学号：" << s.no << endl;
    cout << "性别：" << s.gender << endl;
    cout << "出生如期：" << s.birthday.year << "年";
    cout << s.birthday.month << "月";
    cout << s.birthday.day << "日" << endl;
    cout << "成绩：" << s.score << endl;
    return 0;
}

```

输出：

```
学号：9901001
性别：m
出生如期：2013年10月24日
成绩：95
```



### 结构数组与结构指针

#### **【例9-6】使用结构数组保存5学生信息**

```c++
//文件:ex9_6.cpp
#include <iostream>
using namespace std;

struct student
{
    int no;      //学号
    char gender; //性别
    int age;     //年龄
    float score; //成绩
};

int main()
{
    student s[5] = {
        {9901001, 'm', 20, 86}, //定义结构体数组并初始化
        {9901002, 'f', 18, 92},
        {9901003, 'm', 21, 82},
        {9901004, 'm', 23, 94},
        {9901005, 'f', 21, 70}};
    
    float sum = 0;
    for (int i = 0; i < 5; i++)
    {
        sum += s[i].score;
    }
    
    cout << "平均成绩是：" << sum / 5 << endl;
    return 0;
}

```

输出：

```
平均成绩是：84.8
```

#### **【例9-7】使用结构指针处理学生成绩**

```c++
//文件:ex9_7.cpp
#include <iostream>
using namespace std;

struct student
{
    int no;      //学号
    char gender; //性别
    int age;     //年龄
    float score; //成绩
};

float average(student *p, int n);

int main()
{
    student s[5] = {
        {9901001, 'm', 20, 86}, //定义结构体数组并初始化
        {9901002, 'f', 18, 92},
        {9901003, 'm', 21, 82},
        {9901004, 'm', 23, 94},
        {9901005, 'f', 21, 70}};
    cout << "平均成绩是：" << average(s, 5) << endl; //传递结构数组的首地址
    return 0;
}

float average(student *p, int n) //第一个参数是结构指针
{
    float sum = 0;
    for (int i = 0; i < n; i++)
    {
        sum += (p + i)->score; // p+i指向下标为i的元素
    }
    return sum / 5;
}

```

输出：

```
平均成绩是：84.8
```



## 联合

### **【例9-8】联合变量的定义和使用**

```c++
//文件:ex9_8.cpp
#include <iostream>
using namespace std;

union data //定义联合类型
{
    int i;
    char ch;
    float f;
};

int main()
{
    data d;   //定义联合变量
    d.i = 97; //给一个成员赋值，影响所有成员
    cout << d.i << ", " << d.ch << ", " << d.f << endl;
    
    d.ch = 'A';
    cout << d.i << ", " << d.ch << ", " << d.f << endl;
    
    d.f = 100;
    cout << d.i << ", " << d.ch << ", " << d.f << endl;
    
    cout << sizeof(data) << endl; //联合类型data占用的字节数
    cout << sizeof(d) << endl;
    return 0;
}

```

输出：

```
97, a, 1.35926e-043
65, A, 9.10844e-044
1120403456, , 100
4
4
```



### **【例9-9】求一个整数高位数和低位数**

```c++
//文件:ex9_9.cpp
#include <iostream>
using namespace std;

union word
{
    unsigned char ch[2]; //共2字节
    unsigned short num;  // 2字节
};

int main()
{
    word w;       //定义联合变量
    w.num = 2856; //二进制00001011 00101000
    cout << w.num << "的低字节是：" << (int)w.ch[0];
    cout << " 高字节是：" << (int)w.ch[1] << endl;
    
    w.ch[0] = 0x5d; // 16进制5d，二进制是01011101
    cout << w.num << "的低字节是：" << (int)w.ch[0];
    cout << " 高字节是：" << (int)w.ch[1] << endl;
    return 0;
}

```

输出：

```
2856的低字节是：40 高字节是：11
2909的低字节是：93 高字节是：11
```



## 枚举

### **【例9-10】枚举类型的应用**

```c++
//文件:ex9_10.cpp
#include <iostream>
using namespace std;

enum weekday
{
    Sun = 7,
    Mon = 1,
    Tue,
    Wed,
    Thu,
    Fri,
    Sat
}; //定义枚举类型

int main()
{
    int day;
    cout << "输入星期几(1-7):";
    cin >> day;
    
    switch (day)
    {
    case Sun:
        cout << "今天是星期天\n";
        break;
    case Mon:
        cout << "今天是星期一\n";
        break;
    case Tue:
        cout << "今天是星期二\n";
        break;
    case Wed:
        cout << "今天是星期三\n";
        break;
    case Thu:
        cout << "今天是星期四\n";
        break;
    case Fri:
        cout << "今天是星期五\n";
        break;
    case Sat:
        cout << "今天是星期六\n";
        break;
    default:
        cout << "输入有误\n";
        break;
    }
    return 0;
}

```

输出：

```
输入星期几(1-7):3
今天是星期三
```

## 名称空间

### 名称空间的定义使用

#### **【例9-11]名称空间的定义与使用**

```c++
//文件:ex9_11.cpp
#include <iostream>
using namespace std;

namespace ns1 //名称空间 ns1
{
    int fun(int x, int y);
}

namespace ns2 //名称空间 ns2
{
    int fun(int x, int y);
    namespace ns3 //名称空间 ns3
    {
        int fun(int x, int y);
    }
}

int ns1::fun(int x, int y) //函数fun是名称空间ns1中的
{
    return x + y;
}

int ns2::fun(int x, int y) //函数fun是名称空间ns2中的
{
    return x * y;
}

int ns2::ns3::fun(int x, int y) //函数fun是名称空间ns2::ns3中的
{
    return x - y;
}

int main()
{
    cout << ns1::fun(3, 4) << endl;      //调用名称空间ns1中的函数
    cout << ns2::fun(3, 4) << endl;      //调用名称空间ns2中的函数
    cout << ns2::ns3::fun(3, 4) << endl; //调用名称空间ns2::ns3中的函数
    return 0;
}

```

输出：

```
7
12
-1
```

#### **【例9-12】使用 using 声明**

```c++
//文件:ex9_12.cpp
#include <iostream>
using namespace std;

namespace ns1 // ns1中定义三个函数
{
    int fun1(int x, int y)
    {
        return x + y;
    }
    
    int fun2(int x, int y)
    {
        return x - y;
    }
    
    int fun3(int x, int y)
    {
        return x * y;
    }
}

using ns1::fun1;
using ns1::fun2;

int main()
{
    cout << fun1(3, 4) << endl;
    cout << fun2(3, 4) << endl;
    cout << ns1::fun3(3, 4) << endl;
    return 0;
}

```

输出：

```
7
-1
12
```

#### **【例9-13】使用 using 编译指令**

```c++
//文件:ex9_13.cpp
#include <iostream>
using namespace std;

namespace ns1 // ns1中定义三个函数
{
    int fun1(int x, int y)
    {
        return x + y;
    }
    
    int fun2(int x, int y)
    {
        return x - y;
    }
    
    int fun3(int x, int y)
    {
        return x * y;
    }
}

using namespace ns1; // using编译指令

int main()
{
    cout << fun1(3, 4) << endl; //直接访问
    cout << fun2(3, 4) << endl;
    cout << fun3(3, 4) << endl;
    return 0;
}

```

输出：

```
7
-1
12
```

### C++标准库

## C++文件的组织

### 多文件组织的实现

#### **【例9-14】多文件组织的实现**

##### ex9_14Point.h

Point结构的定义。

```c++
//文件:ex9_14Point.h
#ifndef EX9_14Point_H
#define EX9_14Point_H

struct Point
{
    int x;
    int y;
};
#endif
```

##### ex9_14Circle.h

Circle结构的定义，以及与Circle相关的函数原型。

```c++
//文件:ex9_14Circle.h
#include "ex9_14Point.h"

struct Circle
{
    struct Point center;
    double radius;
};

double area(struct Circle c);
double perimeter(struct Circle c);
```

##### ex9_14Rectangle.h

Rectangle结构的定义，以及与Rectangle相关的函数原型。

```c++
//文件:ex9_14Rectangle.h
#include "ex9_14Point.h"

struct Rectangle
{
    struct Point center;
    double length;
    double width;
};

double area(struct Rectangle c);
double perimeter(struct Rectangle c);

```

##### ex9_14Circle.cpp

与circle结构有关的函数的定义。

```c++
//文件:ex9_14Circle.cpp
#include "ex9_14Circle.h"

double area(struct Circle c)
{
    return 3.14 * c.radius * c.radius;
}

double perimeter(struct Circle c)
{
    return 2 * 3.14 * c.radius;
}

```

##### ex9_14Rectangle.cpp

与Rectangle结构有关的函数的定义。

```c++
//文件:ex9_14Rectangle.cpp
#include "ex9_14Rectangle.h"

double area(struct Rectangle r)
{
    return r.length * r.width;
}

double perimeter(struct Rectangle r)
{
    return 2 * (r.length + r.width);
}

```

##### ex9_14Main.cpp

主函数所在的文件。

```c++
//文件:ex9_14Main.cpp 
#include <iostream>  
#include "ex9_14Circle.h" 
#include "ex9_14Rectangle.h" 

using namespace std;

int main() 
{
	struct Circle c = { { 4,5},10 };
	struct Rectangle r = { {6,8},10,20};
    cout << "圆的面积" << area(c) << endl;	
    cout << "圆的周长" << perimeter(c) << endl;	
    cout << "矩形的面积" << area(r) << endl;	
    cout << "矩形的周长" << perimeter(r) << endl;	
    return 0;  				
}

```



### 编译预处理指令



## 小结



## 习题九













