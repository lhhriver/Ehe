# 第1章  C++概述

# 第2章 处理数据

# 第3章 分支结构

# 第4章 循环结构

# 第5章 数组

# 第6章 指针

# 第7章 函数初识

# 第8章 函数进阶

# 第9章 位运算符、构造类型与名称空间

# 第10章 面向对象与类

## 面向对象的概念

### 面向过程与面向对象

### 面向对象程序设计的基本概念

### 面向对象程序设计的特点



## 类与对象

### 类的定义

#### **【例10-1】定义长方形类Rect**

```c++
//文件:ex10_1.cpp
#include <iostream>
using namespace std;

class Rect //定义类Rect
{
private: // 2个私有属性
    int length;
    int width;

public:                    // 4个公有方法
    void setLength(int l); //这里给出函数原型
    void setWidth(int w);
    int getArea();
    int getPerimeter();
};

void Rect::setLength(int l) //函数的定义
{
    length = l;
}

void Rect::setWidth(int w)
{
    width = w;
}

int Rect::getArea()
{
    return length * width;
}

int Rect::getPerimeter()
{
    return 2 * (length + width);
}

int main()
{
    Rect r1, r2;       //定义Rect类的对象r
    r1.setLength(200); //调用函数
    r1.setWidth(100);
    r2.setLength(20);
    r2.setWidth(10);
    
    cout << "矩形1的面积：" << r1.getArea() << endl;
    cout << "矩形1的周长：" << r1.getPerimeter() << endl;
    cout << "矩形2的面积：" << r2.getArea() << endl;
    cout << "矩形2的周长：" << r2.getPerimeter() << endl;
    return 0;
}

```

输出：

```
矩形1的面积：20000
矩形1的周长：600
矩形2的面积：200
矩形2的周长：60
```



#### **【例10-2】使用工程管理Rect 类**

##### ex10_2Rect.h

```c++
//文件:ex10_2Rect.h
#ifndef EX10_2RECT_H
#define EX10_2RECT_H
#include <iostream>
using namespace std;

class Rect //定义类Rect
{
private: // 2个私有属性
    int length;
    int width;

public:                    // 4个公有方法
    void setLength(int l); //这里给出函数原型
    void setWidth(int w);
    int getArea();
    int getPerimeter();
};
#endif

```

##### ex10_2Rect.cpp

```c++
//文件:ex10_2Rect.cpp
#include <iostream>
#include "ex10_2Rect.h"

void Rect::setLength(int l) //函数的定义
{
    length = l;
}

void Rect::setWidth(int w)
{
    width = w;
}

int Rect::getArea()
{
    return length * width;
}

int Rect::getPerimeter()
{
    return 2 * (length + width);
}

```

##### ex10_2Main.cpp

```c++
//文件:ex10_2Main.cpp
#include <iostream>
#include "ex10_2Rect.h"

int main()
{
    Rect r1, r2;       //定义Rect类的对象r
    r1.setLength(200); //调用函数
    r1.setWidth(100);
    r2.setLength(20);
    r2.setWidth(10);
    
    cout << "矩形1的面积：" << r1.getArea() << endl;
    cout << "矩形1的周长：" << r1.getPerimeter() << endl;
    cout << "矩形2的面积：" << r2.getArea() << endl;
    cout << "矩形2的周长：" << r2.getPerimeter() << endl;
    return 0;
}

```

输出：

```

```



### 成员的访问控制

### 类的成员函数

#### **【例10-3】定义圆类Circle**

```c++
//文件:ex10_3.cpp
#include <iostream>
using namespace std;

const double PI = 3.14159;

class Circle
{
private:
    double radius;

public:
    void setRadius(double r)
    {
        radius = r;
    }
    
    double getArea()
    {
        return PI * radius * radius;
    }
    
    double getPerimeter()
    {
        return 2 * PI * radius;
    }
};

int main()
{
    Circle c;
    c.setRadius(100);
    cout << "圆的面积：" << c.getArea() << endl;
    cout << "圆的周长：" << c.getPerimeter() << endl;
    return 0;
}

```

输出：

```
圆的面积：31415.9
圆的周长：628.318
```



#### **【例10-4】矩形对象占用的内存**

```c++
//文件:ex10_4.cpp
#include <iostream>
using namespace std;

class Rect //定义类Rect
{
private: // 2个私有属性
    int length;
    int width;

public:                    // 4个公有方法
    void setLength(int l); //这里给出函数原型
    void setWidth(int w);
    int getArea();
    int getPerimeter();
};

void Rect::setLength(int l) //函数的定义
{
    length = l;
}

void Rect::setWidth(int w)
{
    width = w;
}

int Rect::getArea()
{
    return length * width;
}

int Rect::getPerimeter()
{
    return 2 * (length + width);
}

int main()
{
    Rect r1, r2; //定义Rect类的对象r
    cout << "sizeof(Rect)：" << sizeof(Rect) << endl;
    cout << "sizeof(r1)：" << sizeof(r1) << endl;
    cout << "r1的地址：" << &r1 << endl;
    cout << "r2的地址：" << &r2 << endl;
    cout << "&r2+1：" << &r2 + 1 << endl;
    cout << "&r2+2：" << &r2 + 2 << endl;
    cout << "&r2+3：" << &r2 + 3 << endl;
    return 0;
}

```

输出：

```
sizeof(Rect)：8
sizeof(r1)：8
r1的地址：0x61fe18
r2的地址：0x61fe10
&r2+1：0x61fe18
&r2+2：0x61fe20
&r2+3：0x61fe28
```



## 构造函数

### 构造函数概述

#### **【例10-5】为Rect 类添加构造函数**

```c++
//文件:ex10_5.cpp
#include <iostream>
using namespace std;

class Rect //定义类Rect
{
private: // 2个私有属性
    int length;
    int width;

public: //公有方法
    Rect(int l, int w);
    int getArea();
    int getPerimeter();
};

Rect::Rect(int l, int w) //构造函数
{
    length = l;
    width = w;
}

int Rect::getArea()
{
    return length * width;
}

int Rect::getPerimeter()
{
    return 2 * (length + width);
}

int main()
{
    Rect r(100, 50); //定义Rect类的对象r
    cout << "矩形的面积：" << r.getArea() << endl;
    cout << "矩形的周长：" << r.getPerimeter() << endl;
    return 0;
}

```

输出：

```
矩形的面积：5000
矩形的周长：300
```

#### **【例10-6】使用初始化表**

```c++
//文件:ex10_6.cpp
#include <iostream>
using namespace std;

class Circle
{
private:
    const double PI;
    double radius;

public:
    Circle(int r) : PI(3.14159) //常量成员必须用初始化表
    {
        radius = r;
    }
    
    double getArea()
    {
        return PI * radius * radius;
    }
    
    double getPerimeter()
    {
        return 2 * PI * radius;
    }
};

int main()
{
    Circle c(100);
    cout << "圆面积：" << c.getArea() << endl;
    cout << "圆周长：" << c.getPerimeter() << endl;
    return 0;
}

```

输出：

```
圆面积：31415.9
圆周长：628.318
```



### 默认构造函数

#### **【例10-7】提供多个构造函数**

```c++
//文件:ex10_7.cpp
#include <iostream>
using namespace std;

class Rect //定义类Rect
{
private: // 2个私有属性
    int length;
    int width;

public:                 //公有方法
    Rect();             //无参构造函数
    Rect(int l, int w); //两个int型参数的构造函数
    Rect(int l);        //一个int型参数的构造函数
    
    int getArea();
    int getPerimeter();
};

Rect::Rect() //将长宽初始化为0
{
    length = 0;
    width = 0;
}

Rect::Rect(int l, int w) //构造函数
{
    length = l;
    width = w;
}
Rect::Rect(int l) //构造一个正方形
{
    length = l;
    width = l;
}

int Rect::getArea()
{
    return length * width;
}

int Rect::getPerimeter()
{
    return 2 * (length + width);
}

int main()
{
    Rect r1;          //调用构造函数 Rect()
    Rect r2(100, 50); //调用构造函数 Rect(int l, int w)
    Rect r3(100);     //调用构造函数 Rect(int l)
    cout << "矩形r1的面积：" << r1.getArea() << endl;
    cout << "矩形r2的面积：" << r2.getArea() << endl;
    cout << "矩形r3的面积：" << r3.getArea() << endl;
    return 0;
}

```

输出：

```
矩形r1的面积：0
矩形r2的面积：5000
矩形r3的面积：10000
```



## 析构函数

### 析构函数的特征

### 析构函数的作用

#### **【例10-8】使用析构函数**

```c++
//文件:ex10_8.cpp
#include <iostream>
#include <cstring>
using namespace std;

class Student
{
private:
    int number;  //学号
    char *name;  //姓名
    int age;     //年龄
    float score; //成绩
public:
    Student();
    Student(int no, char *n, int a, float s);
    ~Student();  //析构函数
    void show(); //显示学生信息
};

Student::Student()
{
    number = 0;
    name = NULL; //如果不提供参数创建一个Student对象，将name设置为NULL
    age = 0;
    score = 0;
}

Student::Student(int no, char *n, int a, float s)
{
    number = no;
    name = new char[strlen(n) + 1]; //申请内存
    strcpy(name, n);                //字符串赋值
    age = a;
    score = s;
}

Student::~Student()
{
    if (name != NULL) //如果name不是NULL，则输出信息，释放内存
    {
        cout << name << "同学即将退学！" << endl;
        delete[] name;
    }
    else //如果name是NULL，只输出信息
    {
        cout << "有一个同学即将退学！" << endl;
    }
}

void Student::show()
{
    if (name != NULL) // name不是NULL才显示
    {
        cout << "学号:" << number << "\t";
        cout << "姓名:" << name << "\t";
        cout << "年龄:" << age << "\t";
        cout << "成绩:" << score << endl;
    }
}

int main()
{
    Student s1;
    Student s2(20200101, "张三", 20, 95);
    Student s3(20200102, "李四", 22, 90);
    s1.show();
    s2.show();
    s3.show();
    return 0;
}

```

输出：

```
学号:20200101   姓名:张三
年龄:20 成绩:95
学号:20200102   姓名:李四
年龄:22 成绩:90
李四同学即将退学！
张三同学即将退学！
有一个同学即将退学！
```

## 拷贝构造函数

### **【例10-9】为 Student类添加拷贝构造函教**

```c++
//文件:ex10_9.cpp
#include <iostream>
#include <cstring>
using namespace std;

class Student
{
private:
    int number;  //学号
    char *name;  //姓名
    int age;     //年龄
    float score; //成绩
public:
    Student();
    Student(int no, char *n, int a, float s);
    Student(const Student &s);
    ~Student();  //析构函数
    void show(); //显示学生信息
};

Student::Student()
{
    number = 0;
    name = NULL; //如果不提供参数创建一个Student对象，将name设置为NULL
    age = 0;
    score = 0;
}

Student::Student(int no, char *n, int a, float s)
{
    number = no;
    name = new char[strlen(n) + 1]; //申请内存
    strcpy(name, n);                //字符串赋值
    age = a;
    score = s;
}

Student::Student(const Student &s) //新对象与参数s一样
{
    number = s.number;
    name = new char[strlen(s.name) + 1];
    strcpy(name, s.name);
    age = s.age;
    score = s.score;
}

Student::~Student()
{
    if (name != NULL) //如果name不是NULL，则输出信息，释放内存
    {
        cout << name << "同学即将退学！" << endl;
        delete[] name;
    }
    else //如果name是NULL，只输出信息
    {
        cout << "有一个同学即将退学！" << endl;
    }
}

void Student::show()
{
    if (name != NULL) // name不是NULL才显示
    {
        cout << "学号:" << number << "\t";
        cout << "姓名:" << name << "\t";
        cout << "年龄:" << age << "\t";
        cout << "成绩:" << score << endl;
    }
}

int main()
{
    Student s1(20200101, "张三", 20, 95);
    Student s2(s1);
    s1.show();
    s2.show();
    return 0;
}

```

输出：

```
学号:20200101   姓名:张三
年龄:20 成绩:95
学号:20200101   姓名:张三
年龄:20 成绩:95
张三同学即将退学！
张三同学即将退学！
```



## 如何设计类

### **【例10-10】完整的Rect类**

```c++
//文件:ex10_10.cpp
#include <iostream>
using namespace std;

class Rect
{
private:
    int length;
    int width;

public:
    Rect(); //提供三个构造方法
    Rect(int l, int w);
    Rect(const Rect &r);
    
    void setLength(int l); //提供一组get、set方法
    int getLength();
    
    void setWidth(int l);
    int getWidth();
    
    int getArea();
    int getPerimeter();
};

Rect::Rect()
{
    length = 0;
    width = 0;
}

Rect::Rect(const Rect &r)
{
    length = r.length;
    width = r.width;
}

Rect::Rect(int l, int w)
{
    length = l;
    width = w;
}

void Rect::setLength(int l)
{
    length = l;
}

int Rect::getLength()
{
    return length;
}

void Rect::setWidth(int w)
{
    width = w;
}

int Rect::getWidth()
{
    return width;
}

int Rect::getArea()
{
    return length * width;
}

int Rect::getPerimeter()
{
    return 2 * (length + width);
}

int main()
{
    Rect r1(100, 50);
    Rect r2(r1);
    cout << "r1的长：" << r1.getLength() << " 宽：" << r1.getWidth() << endl;
    cout << "r2的长：" << r2.getLength() << " 宽：" << r2.getWidth() << endl;
    cout << "--------------------------\n";
    r2.setLength(200);
    r2.setWidth(100);
    cout << "r1的长：" << r1.getLength() << " 宽：" << r1.getWidth() << endl;
    cout << "r2的长：" << r2.getLength() << " 宽：" << r2.getWidth() << endl;
    return 0;
}

```

输出：

```
r1的长：100 宽：50
r2的长：100 宽：50
--------------------------
r1的长：100 宽：50
r2的长：200 宽：100
```



## 综合实例

### **【例10-11】设计复数类**

```c++
//文件:ex10_11.cpp
#include <iostream>
using namespace std;

class Complex
{
private:
    double real;
    double imag;

public:
    Complex(double r = 0, double i = 0); //有默认参数值的构造函数
    Complex(const Complex &c);
    void print();
    Complex add(const Complex &c); //复数加法
    Complex sub(const Complex c);  //复数减法
};

Complex::Complex(double r, double i)
{
    real = r;
    imag = i;
}

Complex::Complex(const Complex &c)
{
    real = c.real;
    imag = c.imag;
}

void Complex::print()
{
    cout << "(" << real << "," << imag << ")" << endl;
}

Complex Complex::add(const Complex &c) //返回两个复数相加的结果
{
    Complex temp;
    temp.real = real + c.real;
    temp.imag = imag + c.imag;
    return temp;
}

Complex Complex::sub(const Complex c) //返回两个复数相减的结果
{
    Complex temp;
    temp.real = real - c.real;
    temp.imag = imag - c.imag;
    return temp;
}

int main()
{
    Complex a(5, 10), b(3.0, 4.0), c, d;
    cout << "a = ";
    a.print();
    cout << "b = ";
    b.print();
    cout << "c = ";
    c.print();
    cout << "---------\n";
    c = a.add(b); //复数a加复数b
    d = a.sub(b); //复数a减复数b
    cout << "c = ";
    c.print();
    cout << "d = ";
    d.print();
    return 0;
}

```

输出：

```
a = (5,10)
b = (3,4)
c = (0,0)
---------
c = (8,14)
d = (2,6)
```



### **【例10-12】设计时间类**

```c++
//文件:ex10_12.cpp
#include <iostream>
using namespace std;

class Time
{
private:
    int hour;
    int minute;
    int second;

public:
    Time(int h = 0, int m = 0, int s = 0); //有默认参数值的构造函数
    void showTime();
    Time add(int s);             //加若干秒
    int interval(const Time &t); //与参数的时间间隔（秒）
};

Time::Time(int h, int m, int s)
{
    hour = h;
    minute = m;
    second = s;
}

void Time::showTime()
{
    cout << hour << ":" << minute << ":" << second << endl;
}

Time Time::add(int s)
{
    Time temp;
    temp.second = second + s;
    if (temp.second >= 60) //将整分钟加到minute
    {
        temp.minute = minute + temp.second / 60;
        temp.second = temp.second % 60;
    }
    
    if (temp.minute >= 60) //将整小时加到hour
    {
        temp.hour = hour + temp.minute / 60;
        temp.minute = temp.minute % 60;
    }
    
    if (temp.hour >= 24) //超过24时，将24减掉
    {
        temp.hour -= 24;
    }
    return temp;
}

int Time::interval(const Time &t) //返回两个时间之差 （秒）
{
    int s;
    s = hour * 3600 + minute * 60 + second - t.hour * 3600 - t.minute * 60 - t.second;
    return s;
}

int main()
{
    Time t1(10, 30, 40);
    Time t2(16, 50, 20);
    Time t3;
    cout << t2.interval(t1) << endl;
    t3 = t2.add(35000);
    t1.showTime();
    t2.showTime();
    t3.showTime();
    return 0;
}

```

输出：

```
22780
10:30:40
16:50:20
2:33:40
```



## 小结



## 习题十













