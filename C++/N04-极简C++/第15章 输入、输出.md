# 第1章  C++概述

# 第2章 处理数据

# 第3章 分支结构

# 第4章 循环结构

# 第5章 数组

# 第6章 指针

# 第7章 函数初识

# 第8章 函数进阶

# 第9章 位运算符、构造类型与名称空间

# 第10章 面向对象与类

# 第11章 类的高级主题

# 第12章 类的继承

# 第13章 多态

# 第14章 模板

# 第15章 输入/输出

## 输人/输出流概述

### 流的概念

### 流类库的结构



## 使用 cout输出

### 插入运算

### put 与 write方注

#### **【例15-1】使用 put 和vrite 方法输出**

```c++
//文件:ex15_1.cpp
#include <iostream>
using namespace std;
int main()
{
    char c[] = "C++Programming";
    cout.put('A').put('B').put('\n');
    for (int i = 1; i <= 10; i++)
    {
        cout.write(c, i);
        cout << endl;
    }
    return 0;
}

```

输出：

```
C
C+
C++
C++P
C++Pr
C++Pro
C++Prog
C++Progr
C++Progra
C++Program
```



## 格式化输入/输出

### 输出宽度控制setw和 width

#### **【例15-2】使用 setw 控制符控制域宽**

```c++
//文件:ex15_2.cpp
#include <iostream>
#include <iomanip>
using namespace std;
int main()
{
    cout << "1234567890" << endl;
    cout << setw(5) << 4.5 << 6.7 << endl;
    cout << setw(5) << 4.5 << setw(5) << 6.7 << endl;
    return 0;
}

```

输出：

```
1234567890
  4.56.7
  4.5  6.7
```

#### **【例15-3】使用 with成员函数控制域宽**

```c++
//文件:ex15_3.cpp
#include <iostream>
using namespace std;
int main() //主函数，每个C++程序必须有且只有一个主函数
{
    char *str[3] = {"abc", "abcde", "abcdefgh"};
    cout << "1234567890" << endl;
    for (int i = 0; i < 3; i++)
    {
        cout.width(6);
        cout << str[i] << endl;
    }
    return 0;
}

```

输出：

```
1234567890
   abc
 abcde
abcdefgh
```

### 填充字符控制setfil 和l

#### **【例15-4)使用 stfl控制填充字符**

```c++
//文件:ex15_4.cpp
#include <iostream>
#include <iomanip>
using namespace std;
int main()
{
    double values[] = {1.23, 15.16, 653.7, 4358.24};
    cout << "1234567890" << endl;
    cout << setfill('*');
    for (int i = 0; i < 4; i++)
        cout << setw(10) << values[i] << endl;
    return 0;
}

```

输出：

```
1234567890
******1.23
*****15.16
*****653.7
***4358.24
```

#### **【例15-5】使用l函教控制填充字符**

```c++
//文件:ex15_5.cpp
#include <iostream>
#include <iomanip>
using namespace std;
int main()
{
    double values[] = {1.23, 15.16, 653.7, 4358.24};
    cout << "1234567890" << endl;
    char oldFill = cout.fill('*');
    for (int i = 0; i < 4; i++)
        cout << setw(10) << values[i] << endl;
    cout.fill(oldFill);
    for (int i = 0; i < 4; i++)
        cout << setw(10) << values[i] << endl;
    return 0;
}

```

输出：

```
1234567890
******1.23
*****15.16
*****653.7
***4358.24
      1.23
     15.16
     653.7
   4358.24
```

### 输出精度控制 setprecision 和precision
#### **【例15-6】控制浮点数精度**

```c++
//文件:ex15_6.cpp
#include <iostream>
#include <iomanip>
using namespace std;
int main()
{
    double pi = 3.141592653;
    double e = 2.718281828;
    int oldPrecision = cout.precision(4);
    cout << pi << endl;
    cout << e << endl;
    cout << setprecision(8) << pi << endl;
    cout << setprecision(oldPrecision) << pi << endl;
    return 0;
}

```

输出：

```
3.142
2.718
3.1415927
3.14159
```

#### **【例15-7】使用科学计数法**

```c++
//文件:ex15_7.cpp
#include <iostream>
#include <ios>
#include <iomanip>
using namespace std;
int main()
{
    double pi = 3141.592653;
    double e = 27182.81828;
    cout.precision(6);
    cout << pi << endl;
    cout << e << endl;
    cout << setiosflags(ios::fixed);
    cout << pi << endl;
    cout << e << endl;
    cout << resetiosflags(ios::fixed);
    cout << setiosflags(ios::scientific);
    cout << pi << endl;
    cout << e << endl;
    return 0;
}

```

输出：

```
3141.59
27182.8
3141.592653
27182.818280
3.141593e+003
2.718282e+004
```



### 设置显示的数制系统.

#### **【例15-8】设置显示的数值系**

```c++
//文件:ex15_8.cpp
#include <iostream>
using namespace std;
int main()
{
    int n = 100;
    cout << "十进制:  " << n << endl;
    cout << hex << "十六进制:" << n << endl;
    cout << oct << "八进制:  " << n << endl;
    cout << dec << "十进制:  " << n << endl;
    return 0;
}

```

输出：

```
十进制:  100
十六进制:64
八进制:  144
十进制:  100
```

### 其他格式状态

#### **【例15-9】使用sef 控制流格**

```c++
//文件:ex15_9.cpp
#include <iostream>
#include <iomanip>
using namespace std;
int main()
{
    int x = 200;
    bool b = true;
    cout.setf(ios_base::boolalpha);
    cout << setw(10) << b << endl;
    cout.setf(ios_base::internal, ios_base::adjustfield);
    cout.setf(ios_base::showpos);
    cout << setw(10) << x << endl;
    cout.unsetf(ios_base::showpos);
    cout << setw(10) << x << endl;
    cout.setf(ios_base::showbase);
    cout.setf(ios_base::hex, ios_base::basefield);
    cout << setw(10) << x << endl;
    cout.setf(ios_base::uppercase);
    cout << setw(10) << x << endl;
    cout.setf(ios_base::oct, ios_base::basefield);
    cout << setw(10) << x << endl;
    cout.unsetf(ios_base::showbase);
    cout << setw(10) << x << endl;
    return 0;
}

```

输出：

```
      true
+      200
       200
0x      c8
0X      C8
      0310
       310
```



## 使用cin输入

### 提取运算符

#### **【例15-10】使用提取运算符输**

```c++
//文件:ex15_10.cpp
#include <iostream>
using namespace std;
int main()
{
    int a, b;
    char c;
    char d[10];
    cin >> a >> b >> c >> d;
    cout << a << "  " << b << "  " << c << "  " << d << endl;
    cin >> hex >> a >> b;
    cout << a << "  " << b << endl;
    return 0;
}

```

输出：

```
5 8 h liuhuihe
5  8  h  liuhuihe
028 6 9
40  6
```



### 使用istream 方法输入数据

#### **【例15-11】使用 get 输入单个字符**

```c++
//文件:ex15_11.cpp
#include <iostream>
//#include <iomanip>
using namespace std;
int main()
{
    char c;
    int n = 0;
    cin.get(c);
    while (c != '\n')
    {
        n++;
        cout << c;
        cin.get(c);
    }
    cout << endl
         << n << endl;
    return 0;
}

```

输出：

```
liu
liu
3
```



#### **【例15-12】使用gtine方法读取字符串**

```c++
//文件:ex15_12.cpp
#include <iostream>
//#include <iomanip>
using namespace std;
int main()
{
    char str1[20], str2[20], str3[20];
    cin.getline(str1, 11, '|');
    cin.getline(str2, 11, '|');
    cin.getline(str3, 11);
    cout << "str1:" << str1 << endl;
    cout << "str2:" << str2 << endl;
    cout << "str3:" << str3 << endl;
    return 0;
}

```

输出：

```

```



## 文件的输入/输出

### 打开文件

### 写入文件

#### **【例15-13]使用 write 函数输出类的对象**

```c++
//文件:ex15_13.cpp
#include <iostream>
#include <fstream>
using namespace std;
class Rect //定义类Rect
{
private: // 2个私有属性
    int length;
    int width;

public:                    // 4个公有方法
    void setLength(int l); //这里给出函数原型
    void setWidth(int w);
    int getArea();
    int getPerimeter();
};
void Rect::setLength(int l) //函数的定义
{
    length = l; //注意：这里是小写字母l，不是数字1
}
void Rect::setWidth(int w)
{
    width = w;
}
int Rect::getArea()
{
    return length * width;
}
int Rect::getPerimeter()
{
    return 2 * (length + width);
}
int main()
{
    Rect r;
    r.setLength(200);
    r.setWidth(100);
    ofstream outfile("D:\\a.txt", ios_base::out); //定义输出文件流对象并打开文件进行输出
    outfile.write((char *)&r, sizeof(r));         //将r地址强制类型转换为字符型指针(char *)
    r.setLength(500);                             //修改长宽，再写一次
    r.setWidth(200);
    outfile.write((char *)&r, sizeof(r));
    outfile.close(); //调用close函数关闭文件
    return 0;
}

```

输出：

```

```



#### **【例15-14】使用 write函数输出数组**

```c++
//文件:ex15_14.cpp
#include <iostream>
#include <fstream>
using namespace std;
int main()
{
    int array[] = {35, 42, 57, 88, 69, 75};
    ofstream outfile("D:\\b.txt", ios_base::app); //在文件尾添加数据
    outfile.write((char *)array, sizeof(array));
    outfile.close();
    return 0;
}

```

输出：

```

```



### 读取文件

#### **【例15-15】读取文件I.txt中的内容并输出到屏幕上**

```c++
//文件:ex15_15.cpp
#include <iostream>
#include <fstream>
using namespace std;
int main()
{
    char array[100];
    ifstream ifs("D:\\c.txt", ios_base::in);
    if (!ifs)
    {
        cout << "打开文件失败" << endl;
        return -1; //如果文件不存在，打开不成功，则结束程序
    }
    while (!ifs.eof()) // eof函数用于判断是否到文件尾，到文件尾返回True
    {
        ifs.getline(array, 100); // 100表示每次读取字符的个数最多为99个
        cout << array << endl;
    }
    ifs.close(); //调用close函数关闭文件
    return 0;
}

```

输出：

```

```

#### **【例15-16】读取文件D矩形数据**

```c++
//文件:ex15_16.cpp
#include <iostream>
#include <fstream>
using namespace std;
class Rect //定义类Rect
{
private: // 2个私有属性
    int length;
    int width;

public:                    // 4个公有方法
    void setLength(int l); //这里给出函数原型
    void setWidth(int w);
    int getArea();
    int getPerimeter();
};
void Rect::setLength(int l) //函数的定义
{
    length = l; //注意：这里是小写字母l，不是数字1
}
void Rect::setWidth(int w)
{
    width = w;
}
int Rect::getArea()
{
    return length * width;
}
int Rect::getPerimeter()
{
    return 2 * (length + width);
}
int main()
{
    Rect r;
    ifstream ifile("D:\\a.txt");
    ifile.read((char *)&r, sizeof(r)); //将读出的数据保存到矩形对象r中
    cout << "矩形面积：" << r.getArea() << endl;
    cout << "矩形周长：" << r.getPerimeter() << endl;
    ifile.read((char *)&r, sizeof(r));
    cout << "矩形面积：" << r.getArea() << endl;
    cout << "矩形周长：" << r.getPerimeter() << endl;
    ifile.close();
    return 0;
}

```

输出：

```

```



### 文件读写位置指针

#### **【例15-17】读取文件中指定的数据**

```c++
//文件:ex15_17.cpp
#include <iostream>
#include <fstream>
using namespace std;
class Rect //定义类Rect
{
private: // 2个私有属性
    int length;
    int width;

public:                    // 4个公有方法
    void setLength(int l); //这里给出函数原型
    void setWidth(int w);
    int getArea();
    int getPerimeter();
};
void Rect::setLength(int l) //函数的定义
{
    length = l; //注意：这里是小写字母l，不是数字1
}
void Rect::setWidth(int w)
{
    width = w;
}
int Rect::getArea()
{
    return length * width;
}
int Rect::getPerimeter()
{
    return 2 * (length + width);
}
int main()
{
    Rect r;
    ifstream ifs("D:\\a.txt");
    //	ifs.seekg( sizeof(Rect), ios_base::beg );	//指针移动到第2条记录起始位置
    ifs.read((char *)&r, sizeof(Rect));
    cout << "读出的矩形面积：" << r.getArea() << endl;
    cout << "读出的矩形周长：" << r.getPerimeter() << endl;
    ifs.close();
    return 0;
}

```

输出：

```
读出的矩形面积：20000
读出的矩形周长：600
```



### 错误处理函数

### 关闭文件



## 输入/输出文件流 fst

### **【例15-18】使用1tum**

```c++
//文件:ex15_18.cpp
#include <iostream>
#include <fstream>
using namespace std;
int main()
{
    fstream iofile("D:\\d.txt", ios::in | ios::out);
    iofile.seekg(0, ios_base::end); //定位至文件尾
    streampos lof = iofile.tellg(); //获取文件长度
    char *data;
    data = new char[lof];      //动态分配内存用于保存文件内容
    iofile.seekg(0, ios::beg); //定位至文件头
    iofile.read(data, lof);    //将文件内容读到data指向的内存中
    cout << "原文件内容为：" << endl;
    for (int i = 0; i < lof; i++)
        cout << data[i]; //逐个输出data指向内存中的字符
    cout << endl;
    iofile.seekp(0, ios_base::end);
    iofile.write(data, lof); //将读出内容写入文件尾
    delete[] data;
    iofile.seekg(0, ios_base::end);
    lof = iofile.tellg();
    data = new char[lof];
    iofile.seekg(0, ios::beg);
    iofile.read(data, lof);
    cout << "读写操作后文件内容为：" << endl;
    for (int i = 0; i < lof; i++)
        cout << data[i];
    cout << endl;
    iofile.close();
    delete[] data;
    return 0;
}

```

输出：

```

```



## 小结

## 习题十五

