# 第1章  C++概述

# 第2章 处理数据

# 第3章 分支结构

# 第4章 循环结构

# 第5章 数组

# 第6章 指针

# 第7章 函数初识

# 第8章 函数进阶

# 第9章 位运算符、构造类型与名称空间

# 第10章 面向对象与类

# 第11章 类的高级主题

# 第12章 类的继承

# 第13章 多态

# 第14章 模板

# 第15章 输入/输出

# 第16章 标准模板库

## vector

### 创建vetor对象

#### **【例16-1】 vector 对象的创建**

```c++
//文件:ex16_1.cpp
#include <iostream>
#include <vector>
using namespace std;
int main()
{
    vector<int> v1(10);
    vector<int> v2(6, 5);
    vector<int> v3(v2);
    vector<int> v4(v2.begin() + 2, v2.end() - 2);
    for (int i = 0; i < v1.size(); i++)
        cout << v1[i] << "  ";
    cout << endl;
    for (int i = 0; i < v2.size(); i++)
        cout << v2[i] << "  ";
    cout << endl;
    for (int i = 0; i < v3.size(); i++)
        cout << v3[i] << "  ";
    cout << endl;
    for (int i = 0; i < v4.size(); i++)
        cout << v4[i] << "  ";
    cout << endl;
    return 0;
}

```

输出：

```
0  0  0  0  0  0  0  0  0  0  
5  5  5  5  5  5  
5  5  5  5  5  5  
5  5 
```



### 迭代器

#### **【例16-2]遍历容器中的每一个元素**

```c++
//文件:ex16_2.cpp
#include <iostream>
#include <vector>
#include <list>
using namespace std;
int main()
{
    vector<int> v(6, 5);
    list<double> l(5, 8);
    vector<int>::iterator itv;
    for (itv = v.begin(); itv != v.end(); itv++)
        cout << *itv << "  ";
    cout << endl;
    list<double>::iterator itl;
    for (itl = l.begin(); itl != l.end(); itl++)
        cout << *itl << "  ";
    cout << endl;
    return 0;
}

```

输出：

```
5  5  5  5  5  5  
8  8  8  8  8
```

#### **【例16-3】使用反向选代器递序输出向量中的元素**

```c++
//文件:ex16_3.cpp
#include <iostream>
#include <vector>
using namespace std;
int main()
{
    vector<int> v(5);
    vector<int>::iterator it;
    int i = 0;
    for (it = v.begin(); it != v.end(); it++)
    {
        i++;
        *it = i; // 1,2,3,4,5
    }
    vector<int>::reverse_iterator rit;
    for (rit = v.rbegin(); rit != v.rend(); rit++)
        cout << *rit << "  ";
    cout << endl;
    return 0;
}

```

输出：

```
5  4  3  2  1
```



### vector 的常用函数

#### **【例16-4】在 vector 中插入元素**

```c++
//文件:ex16_4.cpp
#include <iostream>
#include <vector>
#include <iomanip>
using namespace std;
int main()
{
    vector<int> v1;
    vector<int> v2;
    for (int i = 1; i <= 10; i++)
    {
        v1.push_back(i);      //把参数放在向量末尾    1,2,3,4,5,6,7,8,9,10
        v2.push_back(i * 10); //                      10,20,30,40,50,60,70,80,90,100
    }
    vector<int>::iterator it;
    for (it = v1.begin(); it != v1.end(); it++) //输出v1所有元素  1  2  3  4  5 6  7  8  9  10
        cout << setw(5) << *it;
    cout << endl;
    for (it = v2.begin(); it != v2.end(); it++) //输出v2所有元素  10 20 30 40 50 60 70 80 90 100
        cout << setw(5) << *it;
    cout << endl;
    v1.insert(v1.begin() + 3, 20); //将20插入到索引为3的位置   1  2  3  20 4  5 6  7  8  9  10
    //将v2中 索引为2到索引为6前面的元素插入到v1的索引5处
    v1.insert(v1.begin() + 5, v2.begin() + 2, v2.begin() + 6); // 1  2  3  20 4  30,40,50,60,5   6  7  8  9  10
    v1.insert(v1.begin() + 10, 4, 100);                        //在v1索引为10的位置 插入4个值为100的元素/ / 1  2  3  20 4  30,40,50,60,5   100 100 100 100 6  7  8  9  10
    for (it = v1.begin(); it != v1.end(); it++)                //输出v1所有元素
        cout << setw(5) << *it;
    cout << endl;
    return 0;
}

```

输出：

```
    1    2    3    4    5    6    7    8    9   10
   10   20   30   40   50   60   70   80   90  100
    1    2    3   20    4   30   40   50   60    5  100  100  100  100    6    7    8    9   10
```

#### **【例16-5】测除向量的元素**

```c++
//文件:ex16_5.cpp
#include <iostream>
#include <vector>
#include <iomanip>
using namespace std;
int main()
{
    vector<int> v1;
    for (int i = 1; i <= 10; i++)
        v1.push_back(i); //把参数放在向量末尾  //1  2  3 4 5 6 7 8 9 10
    vector<int>::iterator it;
    for (it = v1.begin(); it != v1.end(); it++) //输出v1所有元素
        cout << setw(4) << *it;
    cout << endl;
    v1.erase(v1.begin() + 2, v1.begin() + 4);   //删除索引2到索引4前一个元素  //1  2  5 6 7 8 9 10
    v1.erase(v1.begin() + 6);                   //删除索引6的元素                       //1  2  5 6 7 8 10
    for (it = v1.begin(); it != v1.end(); it++) //输出v1所有元素
        cout << setw(4) << *it;
    cout << endl;
    v1.pop_back(); // 1  2  5 6 7 8
    cout << setw(4) << v1.front() << endl;
    cout << setw(4) << v1.back() << endl;
    return 0;
}

// 1  2  3 4 5 6 7 8 9 10
// 1  2  5 6 7 8 10
```

输出：

```
   1   2   3   4   5   6   7   8   9  10
   1   2   5   6   7   8  10
   1
   8
```

#### **【例16-6】交换两个向量的元素**

```c++
//文件:ex16_6.cpp
#include <iostream>
#include <vector>
#include <iomanip>
using namespace std;
int main()
{
    vector<int> v1;
    vector<int> v2;
    for (int i = 1; i <= 5; i++)
    {
        v1.push_back(i); //把参数放在向量末尾 1,5,2,10,3,15,4,20,5,25
        v1.push_back(i * 5);
        v2.push_back(i * 10); // 10,20,30 ,40,50
    }
    vector<int>::iterator it;
    cout << "v1的容量：" << v1.capacity() << " 元素数：" << v1.size() << endl;
    for (it = v1.begin(); it != v1.end(); it++) //输出v1所有元素
        cout << setw(4) << *it;
    cout << endl;
    cout << "v2的容量：" << v2.capacity() << " 元素数：" << v2.size() << endl;
    for (it = v2.begin(); it != v2.end(); it++) //输出v1所有元素
        cout << setw(4) << *it;
    cout << endl;
    v1.swap(v2);
    cout << "=====================交换后===================" << endl;
    cout << "v1的容量：" << v1.capacity() << " 元素数：" << v1.size() << endl;
    for (it = v1.begin(); it != v1.end(); it++) //输出v1所有元素
        cout << setw(4) << *it;
    cout << endl;
    cout << "v2的容量：" << v2.capacity() << " 元素数：" << v2.size() << endl;
    for (it = v2.begin(); it != v2.end(); it++) //输出v1所有元素
        cout << setw(4) << *it;
    cout << endl;
    return 0;
}

```

输出：

```
v1的容量：16 元素数：10
   1   5   2  10   3  15   4  20   5  25
v2的容量：8 元素数：5
  10  20  30  40  50
=====================交换后===================
v1的容量：8 元素数：5
  10  20  30  40  50
v2的容量：16 元素数：10
   1   5   2  10   3  15   4  20   5  25
```



##  list

### 创建list 对象

#### **【例16-7】list对象的创建**

```c++
//文件:ex16_7.cpp
#include <iostream>
#include <list>
#include <vector>
#include <iomanip>
using namespace std;
void print(list<int> &ls)
{
    list<int>::iterator it;
    for (it = ls.begin(); it != ls.end(); it++)
        cout << setw(4) << *it;
    cout << endl;
}
int main()
{
    vector<int> v;
    for (int i = 1; i <= 10; i++) // 1 2 3 4 5 6 7 8 9 10
    {
        v.push_back(i);
    }
    list<int> ls1;
    list<int> ls2(5);
    list<int> ls3(5, 10);
    list<int> ls4(ls3);
    list<int> ls5(v.begin() + 1, v.begin() + 6); // 2 3 4 5 6
    print(ls2);
    print(ls3);
    print(ls4);
    print(ls5);
    return 0;
}

```

输出：

```
   0   0   0   0   0
  10  10  10  10  10
  10  10  10  10  10
   2   3   4   5   6
```

### list 的常用函数

#### **【例16-8】 list 排序与反转**

```c++
//文件:ex16_8.cpp
#include <iostream>
#include <list>
#include <vector>
#include <iomanip>
using namespace std;
void print(list<int> &ls)
{
    list<int>::iterator it;
    for (it = ls.begin(); it != ls.end(); it++)
        cout << setw(4) << *it;
    cout << endl;
}
int main()
{
    list<int> ls1;
    ls1.push_back(4);   // 4
    ls1.push_back(5);   // 4,5
    ls1.push_back(6);   // 4,5,6
    ls1.push_front(10); // 10,4,5,6
    ls1.push_front(11); // 11,10,4,5,6
    ls1.push_front(12); // 12,11,10,4,5,6
    print(ls1);
    ls1.sort();
    print(ls1);
    ls1.reverse();
    print(ls1);
    return 0;
}

```

输出：

```
  12  11  10   4   5   6
   4   5   6  10  11  12
  12  11  10   6   5   4
```

#### **【例16-9】** list插入、删除元素

```c++
//文件:ex16_9.cpp
#include <iostream>
#include <list>
#include <vector>
#include <iomanip>
using namespace std;
void print(list<int> &ls)
{
    list<int>::iterator it;
    for (it = ls.begin(); it != ls.end(); it++)
        cout << setw(4) << *it;
    cout << endl;
}
int main()
{
    list<int> ls1;
    ls1.push_back(4); //在链表尾添加元素
    ls1.push_back(5);
    ls1.push_back(6); // 4,5,6
    list<int>::iterator it = ls1.begin();
    it++;               //迭代器指向第2个元素
    ls1.insert(it, 20); //将20插入到第2个元素的位置，迭代器指向下一个元素  //4,20,5,6
    print(ls1);
    ls1.insert(it, 3, 100); //将3个100插入到第2个元素开始的位置   //4,20,100,100,100,5,6
    print(ls1);
    ls1.insert(it, 21); //将21插入到第6个元素的位置，迭代器指向第7个元素 //4,20,100,100,100,21,5,6
    print(ls1);
    it = ls1.erase(it); //删除第7个元素，返回当前的迭代器 //4,20,100,100,100,21,6
    print(ls1);
    ls1.insert(it, 99); //将99插入到第7个元素的位置 //4,20,100,100,100,21,99,6
    print(ls1);
    ls1.remove(100); //删除值为100的元素 //4,20,21,99,6
    print(ls1);
    return 0;
}

```

输出：

```
   4  20   5   6
   4  20 100 100 100   5   6
   4  20 100 100 100  21   5   6
   4  20 100 100 100  21   6
   4  20 100 100 100  21  99   6
   4  20  21  99   6
```

##  map

###  pair

#### **【例16-10】**创建 pair 对象

```c++
//文件:ex16_10.cpp
#include <iostream>
#include <utility>
using namespace std;
int main()
{
    pair<int, double> p1;
    pair<string, double> p2("zhangsan", 90);
    pair<string, double> p3(p2);
    pair<string, string> p4 = make_pair("中国", "北京");
    cout << "(" << p1.first << "," << p1.second << ")\n";
    cout << "(" << p2.first << "," << p2.second << ")\n";
    cout << "(" << p3.first << "," << p3.second << ")\n";
    cout << "(" << p4.first << "," << p4.second << ")\n";
    return 0;
}

```

输出：

```
(0,0)
(zhangsan,90)
(zhangsan,90)
(中国,北京)
```

#### **【例16-11】**string 的基本操作

```c++
//文件:ex16_11.cpp
#include <iostream>
using namespace std;
int main()
{
    string s1;                   //空字符串对象
    string s2("Hello, string!"); //用"Hello, string!"初始化字符串对象s2
    string s3(s2, 2);            //用s2从索引2开始到最后的子串初始化s3  //llo, string!
    string s4(s2, 2, 6);         //用s2从索引2开始的6个字符初始化s4     //llo, s
    string s5(10, 'A');          //用10个字符A初始化s5
    cout << "s1: " << s1 << endl;
    cout << "s2: " << s2 << endl;
    cout << "s3: " << s3 << endl;
    cout << "s4: " << s4 << endl;
    cout << "s5: " << s5 << endl;
    cout << "s2>s4: " << (s2 > s4) << endl; // string重载了关系运算符
    s1 = s2 + s5;                           //重载运算符+，连接两个字符串
    cout << "s1: " << s1 << endl;
    s2.insert(6, "you are a"); //插入字符串
    cout << "s2: " << s2 << endl;
    s2.replace(6, 7, "i am"); //替换子串
    cout << "s2: " << s2 << endl;
    s2.erase(6, 6); //删除子串
    cout << "s2: " << s2 << endl;
    return 0;
}

```

输出：

```

```

#### **【例16-12】** pair的基本操作

```c++
//文件:ex16_12.cpp
#include <iostream>
#include <utility>
using namespace std;
int main()
{
    pair<string, double> p1("zhangsan", 90);
    pair<string, double> p2("lisi", 90);
    pair<string, double> p3("lisi", 95);
    pair<string, double> p4("lisi", 95);
    cout.setf(ios_base::boolalpha);
    cout << (p1 > p2) << endl;  // true
    cout << (p2 < p3) << endl;  // true
    cout << (p2 == p3) << endl; // false
    cout << (p4 == p3) << endl; // true
    return 0;
}

```

输出：

```
true
true
false
true
```

### map 的基本操作

#### **【例16-13】**创建map对象并添加元素

```c++
//文件:ex16_13.cpp
#include <iostream>
#include <utility>
#include <map>
using namespace std;
int main()
{
    map<string, string> map1;
    map1["中国"] = "北京";
    map1["日本"] = "大阪";
    map1["日本"] = "东京"; //插入重复的键，将覆盖原来的”大阪“
    map1["朝鲜"] = "平壤";
    map1["韩国"] = "汉城";
    map1.insert(pair<string, string>("泰国", "曼谷"));
    map1.insert(pair<string, string>("韩国", "曼谷")); //不起作用
    map<string, string>::iterator it = map1.begin();
    while (it != map1.end())
    {
        //	cout << (*it).first<< " " << (*it).second << endl;
        cout << it->first << " " << it->second << endl;
        it++;
    }
    return 0;
}

```

输出：

```
中国 北京
日本 东京
朝鲜 平壤
泰国 曼谷
韩国 汉城
```

#### **【例16-14】在map 中查找指定的键及删除元素**

```c++
//文件:ex16_14.cpp
#include <iostream>
#include <utility>
#include <map>
using namespace std;
int main()
{
    map<string, string> map1;
    map1["中国"] = "北京";
    map1["日本"] = "东京";
    map1["朝鲜"] = "平壤";
    map1["韩国"] = "汉城";
    map<string, string>::iterator it = map1.begin();
    while (it != map1.end())
    {
        cout << it->first << " " << it->second << endl;
        it++;
    }
    it = map1.find("韩国");
    if (it != map1.end())
    {
        cout << it->first << "的首都是：" << it->second << endl;
        map1.erase(it);
    }
    else
        cout << "未找到！" << endl;
    map1.erase("日本");
    it = map1.begin();
    while (it != map1.end())
    {
        cout << it->first << " " << it->second << endl;
        it++;
    }
    return 0;
}

```

输出：

```
中国 北京
日本 东京
朝鲜 平壤
韩国 汉城
韩国的首都是：汉城
中国 北京
朝鲜 平壤
```

###  map 的应用

#### **【例16-15】统计一个字符串中各字符出现的次数**

```c++
//文件:ex16_15.cpp
#include <iostream>
#include <utility>
#include <map>
using namespace std;
int main()
{
    map<char, int> map1;
    string str("Hello, You are a string. a long string!");
    for (int i = 0; str[i] != '\0'; i++)
    {
        map1[str[i]]++; // ('H',1),('e',1),{'l',2)
    }
    map<char, int>::iterator it;
    for (it = map1.begin(); it != map1.end(); it++)
        cout << it->first << " ";
    cout << endl;
    for (it = map1.begin(); it != map1.end(); it++)
        cout << it->second << " ";
    cout << endl;
    return 0;
}

```

输出：

```
  ! , . H Y a e g i l n o r s t u 
7 1 1 1 1 1 3 2 3 2 3 3 3 3 2 2 1 
```

## 算法

###  排序算法

#### **【例16-16】使用sot函数排序**

```c++
//文件:ex16_16.cpp
#include <iostream>
#include <vector>
#include <iomanip>
#include <algorithm>
using namespace std;
void print(vector<int> &v)
{
    vector<int>::iterator it;
    for (it = v.begin(); it != v.end(); it++)
        cout << setw(4) << *it;
    cout << endl;
}
int main()
{
    vector<int> vect;
    vect.push_back(15);
    vect.push_back(12);
    vect.push_back(23);
    vect.push_back(46);
    vect.push_back(37);
    vect.push_back(26);
    vect.push_back(54);
    vect.push_back(18); // 15 12 23 46 37 26 54 18
    print(vect);
    sort(vect.begin() + 1, vect.begin() + 5); //对第2~5元素排序，默认升序
    print(vect);
    sort(vect.begin(), vect.end()); //对所有元素排序
    print(vect);
    sort(vect.begin(), vect.end(), greater<int>()); //降序
    print(vect);
    sort(vect.begin(), vect.end(), less<int>()); //升序
    print(vect);
    return 0;
}

```

输出：

```
  15  12  23  46  37  26  54  18
  15  12  23  37  46  26  54  18
  12  15  18  23  26  37  46  54
  54  46  37  26  23  18  15  12
  12  15  18  23  26  37  46  54
```

### 复制算法

#### **【例16-17】**使用copy函数复制

```c++
//文件:ex16_17.cpp
#include <iostream>
#include <vector>
#include <list>
#include <iomanip>
#include <algorithm>
using namespace std;
void print(string msg, vector<int> &v)
{
    vector<int>::iterator it;
    cout << msg;
    for (it = v.begin(); it != v.end(); it++)
        cout << setw(4) << *it;
    cout << endl;
}
void print(string msg, list<int> &li)
{
    list<int>::iterator it;
    cout << msg;
    for (it = li.begin(); it != li.end(); it++)
        cout << setw(4) << *it;
    cout << endl;
}
int main()
{
    int arr1[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11};
    vector<int> vect1(arr1, arr1 + 8);      // 使用数组初始化vector  0, 1, 2, 3, 4, 5, 6, 7
    vector<int> vect2(arr1 + 6, arr1 + 12); // 使用数组初始化vector    6, 7, 8, 9, 10,11
    list<int> li(arr1 + 2, arr1 + 10);      // 使用数组初始化list   2, 3, 4, 5, 6, 7, 8, 9
    print("vect1:", vect1);
    print("vect2:", vect2);
    print("li:   ", li);
    copy(arr1, arr1 + 3, vect2.begin()); //复制数组部分元素到vect   0, 1, 2  9, 10,11
    print("vect2:", vect2);
    copy(li.begin(), li.end(), vect1.begin() + 3); //复制list元素到vect  0, 1, 2, 2, 3, 4, 5, 6
    print("vect1:", vect1);
    vector<int>::iterator it = vect1.begin();
    copy(it, it + 5, li.begin()); //复制vect部分元素到list  0, 1, 2, 2, 3, 7, 8, 9
    print("li:   ", li);
    return 0;
}

```

输出：

```
vect1:   0   1   2   3   4   5   6   7
vect2:   6   7   8   9  10  11
li:      2   3   4   5   6   7   8   9
vect2:   0   1   2   9  10  11
vect1:   0   1   2   2   3   4   5   6
li:      0   1   2   2   3   7   8   9
```



## 小结

## 习题十六



