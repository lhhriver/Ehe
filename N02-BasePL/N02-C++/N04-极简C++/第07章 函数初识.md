# 第1章  C++概述

# 第2章 处理数据

# 第3章 分支结构

# 第4章 循环结构

# 第5章 数组

# 第6章 指针

# 第7章 函数初识

## 函数的定义与使用

### 函数的定义

#### **【例 7-1】求两个整数中较大值的函数**

```c++
//文件:ex7_1.cpp
#include <iostream>
using namespace std;

int max(int x, int y);

int main()
{
    int a, b, c;
    cout << "请输入两个整数，用空格分隔：";
    cin >> a >> b;
    c = max(a, b); //条用函数max，将a的值传给x，b的值传给y
    cout << "a,b中较大的数是：" << c << endl;
    return 0;
}

int max(int x, int y)
{
    int m;
    if (x > y)
        m = x;
    else
        m = y;
    return m; // m的值从函数返回，赋给了主函数中的变量c
}

```

输出：

```
请输入两个整数，用空格分隔：58 96
a,b中较大的数是：96
```

### 函数的声明与调用

#### **【例7-2】编写一个求x的n次方的函数(n是正整数)**

```c++
//文件:ex7_2.cpp
#include <iostream>
using namespace std;

double power(double x, int n);

int main()
{
    double x;
    int n;
    cout << "请输入x和n的值，用空格分隔：";
    cin >> x >> n;
    cout << x << "的" << n << "次方是：" << power(x, n) << endl;
    return 0;
}

double power(double x, int n)
{
    double a = 1.0;
    int i;
    for (i = 1; i <= n; i++) //循环n次，每次乘x
        a *= x;
    return a;
}

```

输出：

```
请输入x和n的值，用空格分隔：2 10
2的10次方是：1024
```



## 函数的参数传递

### 数值作为函数的参数

#### **【例 7-3】写ー个函数、交换主函数中两个变量的值**

```c++
//文件:ex7_3.cpp
#include <iostream>
using namespace std;

void swap(int x, int y);

int main()
{
    int a, b;
    a = 10;
    b = 20;
    swap(a, b); //值传递，不会改变a、b的值
    cout << a << ", " << b << endl;
    return 0;
}

void swap(int x, int y)
{
    int temp;
    temp = x; //交换x和y的值
    x = y;
    y = temp;
}

```

输出：

```
10, 20
```



### 指针作为函数的参数

#### **【例7-4】指针作为函数的参数，交换主调函数中两个变量的值**

```c++
//文件:ex7_4.cpp
#include <iostream>
using namespace std;

void swap(int *x, int *y);
int main()
{
    int a, b;
    a = 10;
    b = 20;
    swap(&a, &b); //传递地址
    cout << a << ", " << b << endl;
    return 0;
}

void swap(int *x, int *y)
{
    int temp;
    temp = *x; //交换x和y指向单元的内容
    *x = *y;
    *y = temp;
}

```

输出：

```
20, 10
```



### 引用作为函数的参数

#### **【例7-5】引用的使用**

```c++
//文件:ex7_5.cpp
#include <iostream>
using namespace std;

int main()
{
    int a = 1;
    int c = 10;
    int &b = a;                                  //引用b，初始化为a的别名
    
    cout << a << "\t" << b << "\t" << c << endl; // 1   1    10
    
    b = c;                                       //将c的值赋给b，而不是b又成为c的别名
    cout << a << "\t" << b << "\t" << c << endl; // 10   10   10
    
    b = 20;                                      // b改为20，a也是20，他们是同一个
    cout << a << "\t" << b << "\t" << c << endl; // 20   20   10
    return 0;
}

```

输出：

```
1       1       10
10      10      10
20      20      10
```



#### **【例7-6】引用作均面数的参数、交接主调函数中两个变量的值**

```c++
//文件:ex7_6.cpp
#include <iostream>
using namespace std;

void swap(int &x, int &y);

int main()
{
    int a, b;
    a = 10;
    b = 20;
    swap(a, b);
    cout << a << ", " << b << endl;
    return 0;
}

void swap(int &x, int &y) //引用做参数，需要传变量
{
    int temp;
    temp = x;
    x = y;
    y = temp;
}

```

输出：

```
20, 10
```

#### **【例7-7】两个计算圆面积的函数**

```c++
//文件:ex7_7.cpp
#include <iostream>
using namespace std;

double area1(double radius);
double area2(double &radius);
const double PI = 3.14;

int main()
{
    double r = 10;
    cout << area1(r) << endl;     //实参可以是变量，常量，表达式
    cout << area1(100) << endl;   //实参可以是变量，常量，表达式
    cout << area1(r * 2) << endl; //实参可以是变量，常量，表达式
    
    cout << area2(r) << endl;
    // cout <<  area2(100) << endl;	//错误：实参必须是变量
    // cout <<  area2(r*2) << endl;	//错误：实参必须是变量
    return 0;
}

double area1(double radius) //值传递
{
    double a = PI * radius * radius;
    return a;
}

double area2(double &radius) //引用传递
{
    double a = PI * radius * radius;
    return a;
}

```

输出：

```
314
31400
1256
314
```

### 数组作为函数的参数

#### **【例7-8】编写一个函数，将数组中的元素按相反的顺序存放**

```c++
//文件:ex7_8.cpp
#include <iostream>
using namespace std;

void inv(int *p, int n);
int main()
{
    int i, a[10] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};
    
    cout << "原数组：" << endl;
    for (i = 0; i < 10; i++)
        cout << a[i] << "  ";
    cout << endl;
    
    inv(a, 10); //数组名a是数组第一个元素的地址
    
    cout << "交换后的数组：" << endl;
    for (i = 0; i < 10; i++)
        cout << a[i] << "  ";
    cout << endl;
    return 0;
}

void inv(int *p, int n) //第一个参数是指针，要求实参是地址
{
    int *i, *j, temp;
    //开始指针i指向第一个元素位置，j指向最后一个元素的位置。向中间循环
    for (i = p, j = p + n - 1; i < j; i++, j--)
    {
        temp = *i; //交换i和j指向指向单元的值
        *i = *j;
        *j = temp;
    }
}

```

输出：

```
原数组：
0  1  2  3  4  5  6  7  8  9  
交换后的数组：
9  8  7  6  5  4  3  2  1  0 
```

### 字符指针作函数参数

#### **【例7-9】编写连接两个字符串的函数**

```c++
//文件:ex7_9.cpp
#include <iostream>
#include <cstring>
using namespace std;

void stringcat(char *str1, char *str2);

int main()
{
    char a[100] = "ABCDE";
    char b[100] = "fgh123";
    stringcat(a, b); //数组名数组第一个元素的地址
    cout << a << endl;
    cout << b << endl;
    return 0;
}

void stringcat(char *str1, char *str2) //字符指针接收字符的地址
{
    char *p;
    int len = strlen(str1);
    p = str1 + len;       // p指向字符串str1最后一个字符的后面
    
    while (*str2 != '\0') //对str2从头到尾循环
    {
        *p = *str2; //将str2指向的字符赋给p指向的单元
        p++;
        str2++;
    }
    
    *p = '\0'; //在字符串左后加结束标志
}

```

输出：

```
ABCDEfgh123
fgh123
```

## 函数的嵌套调用与递归调用

### 函数的嵌套调用

#### **【例7-10】计算1! + 2！+ 3！+ … + n！**

```c++
//文件:ex7_10.cpp
#include <iostream>
using namespace std;

long f1(int n);
long f2(int m);

int main()
{
    int n;
    long s;
    cout << "请输入n的值：";
    cin >> n;
    s = f1(n); //调用f1(),参数是输入的n
    cout << s << endl;
    return 0;
}

long f1(int n)
{
    int i;
    long sum = 0;
    for (i = 1; i <= n; i++) //从1循环到n
        sum += f2(i);        //调用f2()，求i的阶乘，加到sum中
    return sum;
}

long f2(int m) //求m的阶乘
{
    int i;
    long s = 1;
    for (i = 1; i <= m; i++) //从1循环到m
        s *= i;
    return s; //将m的阶乘返回
}

```

输出：

```
请输入n的值：10
4037913
```



### 函数的递归调用

#### **【例7-11】用递归的方法求n的阶乘**

```c++
//文件:ex7_11.cpp
#include <iostream>
using namespace std;

long power(int n);

int main()
{
    int n;
    long y;
    cout << "请输入一个整数:";
    cin >> n;
    y = power(n); //求n的阶乘
    cout << n << "!=" << y << endl;
    return 0;
}

long power(int n) //求n的阶乘
{
    long f;
    if (n > 1) // n的阶乘等于n乘以n-1的阶乘
        f = n * power(n - 1);
    else // 1的阶乘等于1
        f = 1;
    return f; //返回n的阶乘
}

```

输出：

```
请输入一个整数:10
10!=3628800
```

#### **【例7-12】Hanoi 塔问题**

```c++
//文件:ex7_12.cpp
#include <iostream>
using namespace std;

void Hanoi(int n, char one, char two, char three);

int main()
{
    int n;
    cout << "请输入盘子数：";
    cin >> n;
    cout << n << "个盘子的移动过程为：" << endl;
    Hanoi(n, 'A', 'B', 'C');
    return 0;
}

//函数Hanoi()将n个盘子从one针借助two针移到three针
void Hanoi(int n, char one, char two, char three)
{
    if (n == 1) //只有一个盘子，直接从one移到three
        cout << one << "-->" << three << endl;
    else
    {
        Hanoi(n - 1, one, three, two);         //将n-1个盘子从one移到two
        cout << one << "-->" << three << endl; //将1个盘子从one移到three
        Hanoi(n - 1, two, one, three);         //将n-1个盘子从two移到three
    }
}

```

输出：

```
请输入盘子数：3
3个盘子的移动过程为：
A-->C
A-->B
C-->B
A-->C
B-->A
B-->C
A-->C
```

## 综合实例

### **【例7-13】将一个数字字符串转换为对应的整数**

```c++
//文件:ex7_13.cpp
#include <iostream>
using namespace std;

int convert(char *str);

int main()
{
    char s[10] = "12345";
    int n1 = convert(s);          //传递字符串第一个字符的地址
    int n2 = 10 * convert("314"); //也可以传递一个字符串常量
    cout << n1 << endl;
    cout << n2 << endl;
    return 0;
}

int convert(char *str)
{
    int num = 0, digit;
    for (int i = 0; *(str + i) != '\0'; i++) //从第1个字符循环到最后一个字符
    {
        digit = *(str + i) - '0'; //当前字符的ASCII码减字符0的ASCII码
        num = num * 10 + digit;   // 1   12  123  1234  12345		//原来的数字乘10，再加当前的数字
    }
    return num;
}

```

输出：

```
12345
3140
```

### **【例7-14】删除字符串中指定的字符**

```c++
//文件:ex7_14.cpp
#include <iostream>
using namespace std;

void delChar(char *str, char c);

int main()
{
    char s1[20] = "int_,double_,char";
    delChar(s1, '_'); //调用delChar函数，传递第一个语速的地址和要删除的字符
    cout << s1 << endl;
    return 0;
}

void delChar(char *str, char c)
{
    int i = 0, j;
    while (str[i] != '\0') //从字符串开始循环到结尾
    {
        if (str[i] == c) //如果是要删除的字符
        {
            for (j = i; str[j] != '\0'; j++) //对删除字符后面的字符循环
            {
                str[j] = str[j + 1]; //将这个字符后面的字符前移
            }
        }
        else //如果不是删除的字符，将i加1
            i++;
    }
}

```

输出：

```
int,double,char
```

## 调试技术(三)

## 小结

## 习题七





















