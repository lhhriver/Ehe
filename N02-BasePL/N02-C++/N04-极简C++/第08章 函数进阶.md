# 第1章  C++概述

# 第2章 处理数据

# 第3章 分支结构

# 第4章 循环结构

# 第5章 数组

# 第6章 指针

# 第7章 函数初识

# 第8章 函数进阶

## 内联函数

### **【例8-1】使用内联函数**

```c++
//文件:ex8_1.cpp
#include <iostream>
using namespace std;

inline int add(int a, int b) //内联函数
{
    return a + b;
}

int main()
{
    int a, b, c;
    a = 10;
    b = 20;
    
    c = add(a, b);
    cout << a << " + " << b << " = " << c << endl;
    
    c = add(a, 50);
    cout << a << " + 50 "
         << " = " << c << endl;
    
    c = add(50, 50);
    cout << "50 + 50 "
         << " = " << c << endl;
    return 0;
}

```

输出：

```
10 + 20 = 30
10 + 50  = 60
50 + 50  = 100
```

## 函数重载

### **【例8-2】使用重载函数**

```c++
//文件:ex8_2.cpp
#include <iostream>
using namespace std;

int max(int x, int y); //三个同名函数，参数不同
double max(double x, double y);
char max(char x, char y);

int main()
{
    int a = 10, b = 20, c;
    double x = 200.3, y = 400.6, z;
    char ch;
    c = max(a, b);      //两个整型参数
    z = max(x, y);      //两个实型参数
    ch = max('A', 'F'); //两个字符型参数
    cout << c << "    " << z << "    " << ch << endl;
    return 0;
}

int max(int x, int y)
{
    cout << "int function" << endl;
    if (x > y)
        return x;
    else
        return y;
}

double max(double x, double y)
{
    cout << "double function" << endl;
    if (x > y)
        return x;
    else
        return y;
}

char max(char x, char y)
{
    cout << "char function" << endl;
    if (x > y)
        return x;
    else
        return y;
}

```

输出：

```
int function
double function
char function
20    400.6    F
```

## 默认参数值

### 带默认参数值的函数

#### **【例8-3】使用带默认参数值的函数求x的n次方(n是正整数)**

```c++
//文件:ex8_3.cpp
#include <iostream>
using namespace std;

double power(double x = 10.0, int n = 2);

int main()
{
    cout << power(3, 5) << endl; //使用两个实参
    cout << power(3) << endl;    //第一个参数3，第二个参数使用默认值
    cout << power() << endl;     //两个参数都使用默认值
    return 0;
}

double power(double x, int n)
{
    int i;
    double s = 1.0;
    
    for (i = 1; i <= n; i++) //循环n次，每次乘x
    {
        s *= x;
    }
    return s;
}

```

输出：

```
243
9
100
```

### 默认参数值产生的二义性

#### **【例8-4】重载函数使用默认参数值产生的二义性**

```c++
//文件:ex8_4.cpp
#include <iostream>
using namespace std;

int add(int x = 5, int y = 6);
float add(int x = 5, float y = 10.0);

int main()
{
    int a;
    float b;
    a = add(10, 20);
    b = add(10, (float)21.5);
    // b = add(10); // C++不知道使用哪个函数，产生二义性
    // b = add();   // C++不知道使用哪个函数，产生二义性
    cout << "a= " << a << endl;
    cout << "b= " << b << endl;
    return 0;
}

int add(int x, int y)
{
    return x + y;
}

float add(int x, float y)
{
    return x + y;
}

```

输出：

```
a= 30
b= 31.5
```

## 函数指针

### **【例8-5】使用函数指针调用函数**

```c++
//文件:ex8_5.cpp
#include <iostream>
using namespace std;

int add(int x, int y);

int main()
{
    int a, b;
    //定义函数指针fp，指向具有两个int型参数，并返回int值的函数，
    int (*fp)(int, int);
    fp = add;       // fp指向函数add，也就是fp保存add的首地址
    a = fp(10, 20); //使用函数指针调用函数
    b = fp(a, 50);  //使用函数指针调用函数
    cout << "a= " << a << endl;
    cout << "b= " << b << endl;
    return 0;
}

int add(int x, int y)
{
    return x + y;
}

```

输出：

```
a= 30
b= 80
```

### **【例8-6】函数指针的应用**

```c++
//文件:ex8_6.cpp
#include <iostream>
using namespace std;

int add(int x, int y);
int subtract(int x, int y);
int multiply(int x, int y);
int divide(int x, int y);

int main()
{
    int n;
    int (*p[4])(int x, int y);  //定义函数指针数组
    p[0] = add;                 // p[0]指向函数add
    p[1] = subtract;            // p[1]指向函数subtract
    p[2] = multiply;            // p[2]指向函数multiply
    p[3] = divide;              // p[3]指向函数divide
    
    for (int i = 0; i < 4; i++) //使用函数指针调用函数
        cout << p[i](10, 5) << endl;
    return 0;
}

int add(int x, int y)
{
    return x + y;
}

int subtract(int x, int y)
{
    return x - y;
}

int multiply(int x, int y)
{
    return x * y;
}

int divide(int x, int y)
{
    if (y == 0)
        return 0;
    else
        return x / y;
}

```

输出：

```
15
5
50
2
```

## 命令行参数

### 命令行参数

#### **【例8-7】加减乘除计算器**

```c++
//文件:ex8_7.cpp
#include <iostream>
using namespace std;

int main(int argc, char *argv[])
{
    int a1, a2, a3;
    char c;
    
    if (argc != 4) //程序名，两个数，运算符，一共4各参数    //ex8_7    10  +  12
    {
        cout << "参数数量不对。\n";
        exit(0);
    }
    
    a1 = atoi(argv[1]); //第一个数 ，atoi将字符串转化为对应的整数
    a2 = atoi(argv[3]); //第二个数
    c = argv[2][0];     //运算符，将字符串转换为字符
    
    switch (c)          //根据运算符，分别实现不同的运算
    {
    case '+':
        a3 = a1 + a2;
        break;
    case '-':
        a3 = a1 - a2;
        break;
    // case '*':	a3 = a1*a2;
    //	break;
    case '/':
        a3 = a1 / a2;
        break;
    default:
        cout << "运算符输入错误。\n";
        exit(0);
    }
    cout << a1 << c << a2 << "的结果是：" << a3 << endl;
    getchar();
    return 0;
}

```

输出：

```

```

### 带有命令行参数程序的运行



## 变量的存储类别

### 内部变量与外部变量

#### **【例8-8】使用局部变量和全局变量**

```c++
//文件:ex8_8.cpp
#include <iostream>
using namespace std;
void fun();
int i = 1; //全局变量，文件作用域
int main()
{
    cout << "全局变量 i=" << i << endl; //输出全局变量：1
    int i = 5;                          //函数局部变量，块作用域
    {
        int i; //块局部变量，块作用域
        i = 7;
        cout << "块局部变量 i=" << i << endl; //块局部作用域：7
        cout << "全局变量 i=" << ::i << endl; //::使用全局变量：1
    }
    cout << "函数局部变量 i=" << i << endl; //函数局部变量：5
    cout << "全局变量 i=" << ::i << endl;   //::使用全局变量：1
    fun();
    return 0;
}
void fun()
{
    int i = 10;
    cout << "fun()中的局部变量 i=" << i << endl; // 10
    cout << "全局变量 i=" << ::i << endl;        // 1
}

```

输出：

```
全局变量 i=1
块局部变量 i=7
全局变量 i=1
函数局部变量 i=5
全局变量 i=1
fun()中的局部变量 i=10
全局变量 i=1
```



### 变量的存储类别

#### **【例8-9】输出1~4的阶乘**

```c++
//文件:ex8_9.cpp
#include <iostream>
using namespace std;

int fact(int n);

int main()
{
    int i;
    for (i = 1; i <= 4; i++)
        cout << i << "! = " << fact(i) << endl;
    cout << "不能这样计算10的阶乘：" << fact(10) << endl; //不能实现
    return 0;
}

int fact(int n)
{
    static int f = 1; //静态变量,初始化为1，调用时不再重新初始化
    f *= n;
    return f; //离开函数后，静态变量f的值被保存   f=1, 2 ,6, 24
}

```

输出：

```
1! = 1
2! = 2
3! = 6
4! = 24
不能这样计算10的阶乘：240
```

#### **【例8-10】静态变量与自动变量的使用**

```c++
//文件:ex8_10.cpp
#include <iostream>
using namespace std;

void fun();

int i = 1; // i 为全局变量，具有静态生存期

int main()
{
    static int a; // a为静态局部变量，具有全局寿命，局部可见
    int b = -10;  // b和c为动态局部变量，具有局部生存期
    int c = 0;
    cout << "---MAIN---\n";
    cout << " i: " << i << " a: " << a << " b: " << b << " c: " << c << endl;
    
    c = c + 8; // c=8
    fun();
    
    cout << "---MAIN---\n";
    cout << " i: " << i << " a: " << a << " b: " << b << " c: " << c << endl;
    
    i = i + 10; // i =43
    fun();
    return 0;
}

void fun()
{
    // a和b为静态局部变量，具有全局寿命，局部可见
    // 只第一次进入函数时被初始化
    static int a = 2;
    static int b;
    int c = 10; // c为动态局部变量，每次进入函数时都初始化
    
    a = a + 2;  // a =4,  6
    i = i + 32; // i =33, 75
    c = c + 5;  // c =15
    cout << "---FUN---\n";
    cout << " i: " << i << " a: " << a << " b: " << b << " c: " << c << endl;
    b = a; // b=4,6
}

```

输出：

```
---MAIN---
 i: 1 a: 0 b: -10 c: 0
---FUN---
 i: 33 a: 4 b: 0 c: 15
---MAIN---
 i: 33 a: 0 b: -10 c: 8
---FUN---
 i: 75 a: 6 b: 4 c: 15
```

## 小结

## 习题八



















