# 文件

## 文件编码

fp=open(...)　是由操作系统打开文件，如果我们没有为open指定编码，操作系统会用自己的默认编码去打开文件，在windows下是gbk，在linux下是utf-8。 

## 文件的打开模式

1. open('文件路径', mode= '模式', encoding='编码格式') as 文件句柄 
	- model 模式, 默认是 r
	- encoding 指定打开的编码格式

2. with open('文件路径',mode= '模式', encoding='编码格式')  as 文件句柄
	- 文件句柄.flush(): 刷新文件 
	- 文件句柄.close(): 关闭文件 
3. 模式说明
	- r 代表read的简写
	- \+ 代表可读可写
	- w 代表write
	- b 代表bit二进制位


| <span style="white-space:nowrap;">&emsp;模式&emsp;</span> | 类别 | 描述                                                         |
| :-------------------------------------------------------: | :--: | :----------------------------------------------------------- |
|                          **读**                           |  r   | 以**只读**方式打开文件。文件的指针将会放在文件的**开头**。这是默认模式。 |
|                          **读**                           |  rb  | 以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。 |
|                          **读**                           |  r+  | 打开一个文件用于读写。文件指针将会放在文件的开头。           |
|                          **读**                           | rb+  | 以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。 |
|                          **写**                           |  w   | 打开一个文件只用于**写入**。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被**删除**。如果该文件不存在，**创建新文件**。 |
|                          **写**                           |  wb  | 以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。 |
|                          **写**                           |  w+  | 打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。 |
|                          **写**                           | wb+  | 以二进制格式打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。 |
|                         **追加**                          |  a   | 打开一个文件用于**追加**。如果该文件已存在，文件指针将会放在文件的**结尾**。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，**创建新文件**进行写入。 |
|                         **追加**                          |  ab  | 以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。 |
|                         **追加**                          |  a+  | 打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。 |
|                         **追加**                          | ab+  | 以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。 |

![](https://gitee.com/liuhuihe/Ehe/raw/master/images/01-基础知识-20201215-230732-230207.png)

## 文件的操作方法

> 常用操作方法

| 序号 |    方法     | 说明                           |
| :--: | :---------: | ------------------------------ |
|  1   | readable()  | 判断文件是否可以读             |
|  2   |   read()    | 读取文件                       |
|  3   | readline()  | 读取一行文件                   |
|  4   | readlines() | 读取所有内容, 并保存到列表     |
|  5   | readinto()  | 读取到缓冲区, 不要用, 将被遗弃 |
|  6   | writeable() | 判断是否可写                   |
|  7   |   write()   | 写入文件内容                   |
|  8   |   next()    | 读取下一行内容, 没有就报错     |
|  9   |   seek()    | 0是开头, 1是当前, 2是结尾      |
|  10  |   tell()    | 获取指针位置                   |
|  11  | truncate()  | 截断文件                       |



## 文件的修改

文件的数据是存放于硬盘上的，因而只存在覆盖、不存在修改这么一说，我们平时看到的修改文件，都是模拟出来的效果，具体的说有两种实现方式： 

1. 将硬盘存放的该文件的内容全部加载到内存，在内存中是可以修改的，修改完毕后，再由内存覆盖到硬盘。
2. 将硬盘存放的该文件的内容一行一行地读入内存，修改完毕就写入新文件，最后用新文件覆盖源文件 。



# 编码

## **编码的种类**

|  名称  | 说明                                                         |
| :----: | ------------------------------------------------------------ |
| ascii  | 不能改变, 最早的编码, 8bit, 1byte                            |
|  GBK   | 里面的内容占16bit, 2byte                                     |
| unicde | 万国码, 占32bit, 4byte, **优点**: 包含了所有的编码类型, **缺点**: 浪费数据传输和数据存储 |
| utf-8  | 长度可变: **英文**: 8bit, 1byte     **中文**: 24bit, 3byte   |



## **字符与字节之间的转换**

1. encode(编码名): 把文字变成byte类型的, 默认是utf-8格式的。
2. decode(编码): 把字节类型转换成文字。



## **小数据池(python的优化操作)**

1. int类型：两个变量的值如果相同，值在-5到256之间的内存地址是一样的。
2. str：如果值是一样的那就是同一个内存地址。
3. is：判断的是内存地址。
4. id(变量)：返回变量的内存地址。