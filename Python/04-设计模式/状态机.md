```python
"""
模拟案例开发
"""
from transitions import Machine


class CreateMachine(object):
    """
    状态机
    """

    def __init__(self, name, states, trigger, transitions, initial, event):
        """

        :param states: 名字
        :param states: 状态
        :param trigger: 动作
        :param transitions: 变换
        :param initial: 初始状态
        """
        self.name = name
        self.states = states
        self.trigger = trigger
        self.transitions = transitions
        self.initial = initial
        self.event = event
        self.model = CreateMachine
        self.machine = Machine(model=self.model, states=self.states, transitions=self.transitions, initial=self.initial)

    def get_name(self):
        print('当前机器名称：%s' % self.name)

    def add_transition(self, trigger, source, dest):
        print("+ 添加动作：%s" % trigger)
        self.trigger.append(trigger)
        self.machine.add_transition(trigger=trigger, source=source, dest=dest)

    def machine_trigger(self, trigger_name):
        try:
            print("> 执行动作：%s" % trigger_name)
            assert trigger_name in self.trigger, "× 错误操作：%s" % trigger_name
            self.model.trigger(trigger_name)

            self.machine_state()
        except Exception as e:
            print(e, '\n')

    def machine_state(self):
        print('当前状态: %s \n' % self.model.state)

    def machine_initial_state(self):
        print('初始状态: %s \n' % self.initial)

    def do_event(self):
        for ev in self.event:
            self.machine_trigger(ev)


if __name__ == "__main__":
    machine_one_info = {'name': '神威太湖之光-1号',
                        'states': ['开机状态', '关机状态', '休眠状态', '睡眠状态'],
                        'trigger': ['开机', '关机', '休眠', '睡眠'],
                        'transitions': [
                            {'trigger': '开机', 'source': ['关机状态', '休眠状态', '睡眠状态'], 'dest': '开机状态'},
                            {'trigger': '关机', 'source': ['开机状态'], 'dest': '关机状态'},
                            {'trigger': '休眠', 'source': ['开机状态'], 'dest': '休眠状态'},
                            {'trigger': '睡眠', 'source': ['开机状态'], 'dest': '睡眠状态'}],
                        'initial': '关机状态',
                        'event': ['开机', '休眠', '开机', '关机', '休眠', '灌水']
                        }

    one_machine = CreateMachine(name=machine_one_info['name'],
                                states=machine_one_info['states'],
                                trigger=machine_one_info['trigger'],
                                transitions=machine_one_info['transitions'],
                                initial=machine_one_info['initial'],
                                event=machine_one_info['event'])

    one_machine.get_name()
    one_machine.machine_initial_state()
    one_machine.do_event()

    # one_machine.machine_trigger('开机')
    # one_machine.machine_trigger('休眠')
    # one_machine.machine_trigger('开机')
    # one_machine.add_transition(trigger="断电", source="开机状态", dest="关机状态")
    # one_machine.machine_trigger('断电')
    # one_machine.machine_trigger('休眠')
    # one_machine.machine_trigger('灌水')
    # one_machine.machine_state()

```

